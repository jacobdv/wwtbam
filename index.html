<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Who Wants to be a Millionaire</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep-blue: #0a1529;
            --bg-warm-glow: #2a1a0a;
            --glass-bg: rgba(20, 30, 50, 0.7);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-snow: #e6f2ff;
            --text-warm: #ffdaa6;
            --accent-warm: #ffc06e;
            --accent-selected: #ff9f43;
            --accent-correct: #2ecc71;
            --accent-wrong: #e74c3c;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center bottom, var(--bg-warm-glow), var(--bg-deep-blue) 70%);
            color: var(--text-snow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        /* --- CSS Snow Animation --- */
        .snow {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; z-index: 1;
            background-image: 
                radial-gradient(4px 4px at 100px 50px, #fff, transparent),
                radial-gradient(6px 6px at 200px 150px, #fff, transparent),
                radial-gradient(3px 3px at 300px 250px, #fff, transparent);
            background-size: 550px 550px;
            animation: snowAnim 10s linear infinite; opacity: 0.3;
        }
        @keyframes snowAnim { from { transform: translateY(-550px); } to { transform: translateY(0); } }

        /* --- Main Layout --- */
        #main-container {
            position: relative; z-index: 10;
            display: flex; width: 95%; max-width: 1200px; height: 90vh;
            align-items: center; justify-content: center; gap: 20px;
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border); border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* --- Setup Panel --- */
        #setup-panel {
            position: absolute; z-index: 30; padding: 40px; text-align: center;
            width: 90%; max-width: 500px;
            max-height: 90vh; overflow-y: auto;
        }
        h1 { color: var(--text-warm); font-weight: 600; margin-bottom: 20px; font-size: 1.8rem; }
        
        .divider { margin: 20px 0; border-top: 1px solid rgba(255,255,255,0.1); width: 100%; }

        input[type="file"] { display: none; }
        .setup-btn {
            display: block; width: 100%; margin: 15px 0; padding: 15px;
            border: 1px solid var(--glass-border); border-radius: 12px;
            background: rgba(255, 255, 255, 0.05); color: var(--text-snow);
            cursor: pointer; transition: 0.2s; font-size: 1rem;
        }
        .setup-btn:hover { background: rgba(255, 255, 255, 0.15); border-color: var(--accent-warm); color: var(--text-warm); }
        
        button.control-btn {
            background: linear-gradient(135deg, var(--accent-warm), #ad6d2d);
            border: none; color: #1a0f00; padding: 12px 30px; width: 100%;
            cursor: pointer; font-size: 1.1rem; font-weight: 600;
            border-radius: 50px; box-shadow: 0 4px 15px rgba(255, 192, 110, 0.3);
        }
        button.control-btn:active { transform: scale(0.98); }

        /* --- Game Area --- */
        #game-area { display: none; flex: 3; width: 100%; padding: 20px; flex-direction: column; justify-content: center; }
        
        .hud {
            display: flex; justify-content: space-between; color: var(--text-warm);
            font-size: 1rem; margin-bottom: 20px; border-bottom: 1px solid var(--glass-border);
            padding-bottom: 10px;
        }

        .question-box {
            min-height: 100px; display: flex; align-items: center; justify-content: center;
            margin-bottom: 20px; font-size: 1.3rem; padding: 20px; text-align: center;
            background: rgba(10, 20, 35, 0.85); line-height: 1.4;
        }

        .answers-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        .answer-btn {
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border);
            border-radius: 30px; color: var(--text-snow); padding: 15px 20px;
            font-size: 1rem; cursor: pointer; text-align: left; display: flex; align-items: center;
            min-height: 60px;
        }
        .answer-btn:active { transform: scale(0.98); }
        .answer-letter { color: var(--accent-warm); font-weight: 600; margin-right: 10px; font-size: 1.1rem; flex-shrink: 0;}

        /* --- Money Ladder --- */
        #money-ladder-container {
            display: none; flex: 1; max-width: 250px; height: 100%;
            /* Desktop: Column Reverse puts first element (Lowest $) at bottom, Last ($1M) at top */
            flex-direction: column-reverse; 
            justify-content: center; padding: 20px;
            overflow-y: auto;
        }
        .ladder-step {
            display: flex; justify-content: space-between; padding: 5px 15px; margin: 2px 0;
            border-radius: 8px; color: var(--text-snow); font-size: 0.9rem; opacity: 0.5;
        }
        .ladder-step.active {
            background: linear-gradient(90deg, rgba(255, 192, 110, 0.2), transparent);
            border-left: 3px solid var(--accent-warm); color: var(--text-warm); opacity: 1; font-weight: 600;
        }
        .ladder-step.milestone { color: white; font-weight: 600; opacity: 0.8; }

        /* --- Confirmation Dialog --- */
        #confirmation-box {
            display: none; margin-top: 20px; flex-direction: column; align-items: center; gap: 15px;
            animation: fadeIn 0.3s ease; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 15px;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        .confirm-text { font-size: 1.1rem; color: var(--text-warm); }
        .confirm-btn-group { display: flex; gap: 15px; width: 100%; justify-content: center; }
        .confirm-btn {
            border: 1px solid var(--glass-border); padding: 10px 30px; border-radius: 20px;
            font-weight: 600; color: white; flex: 1; max-width: 120px;
        }
        .confirm-yes { background: rgba(46, 204, 113, 0.3); border-color: var(--accent-correct); }
        .confirm-no { background: rgba(231, 76, 60, 0.3); border-color: var(--accent-wrong); }

        /* --- Next Button --- */
        #next-btn-container {
            height: 60px; width: 100%; display: flex; align-items: center; justify-content: center;
            margin-top: 10px; opacity: 0; pointer-events: none; transition: 0.5s;
        }
        #next-btn-container.visible { opacity: 1; pointer-events: all; }

        /* --- Preloaded Games Modal --- */
        #preloaded-modal {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 40; flex-direction: column; 
            align-items: center; justify-content: center;
        }
        .modal-content {
            background: var(--bg-deep-blue); padding: 30px; width: 90%; max-width: 400px;
            border-radius: 20px; border: 1px solid var(--accent-warm); text-align: center;
        }
        .game-select-btn {
            display: block; width: 100%; padding: 15px; margin: 10px 0;
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255,255,255,0.2);
            color: white; border-radius: 10px; font-size: 1rem;
        }

        /* --- States --- */
        .answer-btn.selected { background: rgba(255, 159, 67, 0.3); border-color: var(--accent-selected); color: var(--text-warm); }
        .answer-btn.correct { background: rgba(46, 204, 113, 0.4) !important; border-color: var(--accent-correct) !important; color: white !important; }
        .answer-btn.wrong { background: rgba(231, 76, 60, 0.4) !important; border-color: var(--accent-wrong) !important; }

        /* --- MOBILE OPTIMIZATIONS --- */
        @media (max-width: 900px) {
            #main-container { flex-direction: column-reverse; height: 100vh; padding: 10px 0; justify-content: flex-end; }
            
            /* Make Ladder Horizontal Scroll on Mobile */
            #money-ladder-container { 
                /* Mobile: Row puts first element (Lowest $) at Left, Last ($1M) at Right */
                flex-direction: row; 
                height: auto; width: 100%; max-width: 100%; 
                overflow-x: auto; 
                
                /* INCREASED PADDING HERE: 80px on sides to prevent cutoff */
                padding: 15px 80px;
                
                background: rgba(0,0,0,0.6);
                border-radius: 0; border: none; border-top: 1px solid var(--glass-border);
                flex: 0 0 auto; 
                white-space: nowrap;
                order: 1;
            }
            #game-area { 
                order: 2; flex: 1; 
                justify-content: flex-start; overflow-y: auto; padding-bottom: 0;
            }

            .ladder-step { 
                margin: 0 10px; min-width: 80px; font-size: 0.8rem; 
                flex-direction: column; text-align: center; display: inline-flex; 
            }
            .ladder-step.active { border-left: none; border-bottom: 3px solid var(--accent-warm); transform: scale(1.05); }

            .answers-grid { grid-template-columns: 1fr; gap: 10px; }
            .question-box { font-size: 1.1rem; padding: 15px; min-height: 80px; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="snow"></div>

    <div id="main-container">
        <div id="game-area" class="glass-panel">
            <div class="hud">
                <span id="score-display">Q: 1</span>
                <span id="current-money-display">$0</span>
            </div>

            <div class="question-box glass-panel" id="question-text">Loading...</div>

            <div class="answers-grid">
                <button class="answer-btn" id="btn-A" onclick="selectAnswer('A')"><span class="answer-letter">A</span> <span id="text-A"></span></button>
                <button class="answer-btn" id="btn-B" onclick="selectAnswer('B')"><span class="answer-letter">B</span> <span id="text-B"></span></button>
                <button class="answer-btn" id="btn-C" onclick="selectAnswer('C')"><span class="answer-letter">C</span> <span id="text-C"></span></button>
                <button class="answer-btn" id="btn-D" onclick="selectAnswer('D')"><span class="answer-letter">D</span> <span id="text-D"></span></button>
            </div>

            <div id="confirmation-box">
                <div class="confirm-text">Final Answer?</div>
                <div class="confirm-btn-group">
                    <button class="confirm-btn confirm-no" onclick="handleConfirmation(false)">NO</button>
                    <button class="confirm-btn confirm-yes" onclick="handleConfirmation(true)">YES</button>
                </div>
            </div>

            <div id="next-btn-container">
                <button class="control-btn" id="next-btn" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>

        <div id="money-ladder-container" class="glass-panel"></div>
    </div>

    <div id="preloaded-modal">
        <div class="modal-content glass-panel">
            <h2>Select Game</h2>
            <div id="preloaded-list">
                </div>
            <button class="setup-btn" onclick="closePreloadedMenu()" style="margin-top:20px; border-color: var(--accent-wrong);">Cancel</button>
        </div>
    </div>

    <div id="setup-panel" class="glass-panel">
        <h1>Millionaire Mobile</h1>
        <p style="color: var(--text-snow); font-size: 0.9rem;">Choose a preloaded game or upload your own.</p>
        
        <button class="setup-btn" onclick="showPreloadedMenu()" style="border-color: var(--accent-warm); font-weight: bold;">
            ðŸŽ® &nbsp; Choose Preloaded Game
        </button>

        <div class="divider"></div>

        <label for="fileInput" class="setup-btn" id="fileLabel">
            ðŸ“‚ &nbsp; Upload .txt File
        </label>
        <input type="file" id="fileInput" accept=".txt" onchange="updateFileName()">
        
        <button class="control-btn" onclick="processFile()">Start Uploaded Game</button>
        
        <p id="error-msg" style="color: var(--accent-wrong); display: none; margin-top: 15px; font-size: 0.9rem;">Invalid file format.</p>
    </div>

    <script>
        const PRELOADED_GAMES = {
            "Christmas Special": [
                "On what date is Christmas Day celebrated? | December 24 | December 25 | December 26 | December 31 | B",
                "Which famous reindeer has a very shiny red nose? | Dasher | Comet | Rudolph | Blitzen | C",
                "In 'Jingle Bells', what type of sleigh is mentioned? | One-horse open | Two-horse closed | Flying magical | Motorized | A",
                "What treats are traditionally left out for Santa Claus? | Pizza & Soda | Burgers & Fries | Milk & Cookies | Tea & Toast | C",
                "Who tries to stop Christmas from coming to Whoville? | The Grinch | Ebenezer Scrooge | Jack Frost | The Joker | A",
                "In the song 'The Twelve Days of Christmas', what is given on the 5th day? | Golden Rings | Calling Birds | French Hens | Turtle Doves | A",
                "Which famous ballet features the 'Dance of the Sugar Plum Fairy'? | Swan Lake | The Nutcracker | Sleeping Beauty | Romeo and Juliet | B",
                "Which country is credited with starting the Christmas tree tradition? | USA | France | Germany | England | C",
                "What is the first name of Scrooge in 'A Christmas Carol'? | Jacob | Ebenezer | Fred | Robert | B",
                "What popular Christmas beverage is also known as 'milk punch'? | Apple Cider | Hot Cocoa | Eggnog | Mulled Wine | C",
                "Which U.S. state was the first to recognize Christmas as an official holiday? | Alabama | New York | Texas | California | A",
                "In which modern-day country was the real Saint Nicholas born? | Italy | Turkey | Greece | Israel | B",
                "Who wrote the famous poem 'A Visit from St. Nicholas' (The Night Before Christmas)? | Charles Dickens | Clement Clarke Moore | Hans Christian Andersen | Dr. Seuss | B",
                "What date corresponds to the 'Feast of Stephen' mentioned in 'Good King Wenceslas'? | Dec 24 | Dec 25 | Dec 26 | Jan 1 | C",
                "Which British monarch broadcast the first Royal Christmas Message in 1932? | Queen Victoria | King George V | King George VI | Queen Elizabeth II | B"
            ],
            "Winter Weather": [
                "What is the freezing point of water on the Fahrenheit scale? | 0Â°F | 32Â°F | 100Â°F | 212Â°F | B",
                "What is the term for a severe snowstorm with high winds and low visibility? | Tsunami | Monsoon | Blizzard | Typhoon | C",
                "Which winter sport is played on a sheet of ice with stones and brooms? | Hockey | Luge | Curling | Figure Skating | C",
                "What do we call the sleep-like state some animals enter during winter? | Estivation | Hibernation | Meditation | Gestation | B",
                "Which medical condition is caused by prolonged exposure to freezing temperatures? | Heatstroke | Frostbite | Sunburn | Hay Fever | B",
                "What is the name of the shortest day of the year? | Summer Solstice | Winter Solstice | Vernal Equinox | Autumnal Equinox | B",
                "How many sides or branches does a standard snowflake have? | 4 | 5 | 6 | 8 | C",
                "Which two factors are used to calculate 'Wind Chill'? | Temp & Humidity | Temp & Wind Speed | Wind Speed & Pressure | Pressure & Humidity | B",
                "What is the term for when visibility drops to near zero due to blowing snow? | Blackout | Brownout | Whiteout | Fadeout | C",
                "What is the name of the 'Snow Eater' wind that warms the eastern Rockies? | Chinook | Monsoon | Sirocco | Mistral | A",
                "What meteorological term describes rain that freezes into ice pellets before hitting the ground? | Hail | Sleet | Freezing Rain | Graupel | B",
                "At what temperature do the Celsius and Fahrenheit scales read the exact same number? | -40 | 0 | 32 | -100 | A",
                "What process allows snow to disappear into the air without melting into water first? | Evaporation | Condensation | Sublimation | Transpiration | C",
                "What is the technical name for 'soft hail' or snow pellets? | Dendrites | Graupel | Hoarfrost | Rime | B",
                "Where was the lowest natural temperature on Earth (-128.6Â°F) recorded? | North Pole | Mt Everest | Siberia | Vostok Station, Antarctica | D"
            ],
            "Holiday Blockbusters": [
                "In 'Elf', what is Buddy's favorite condiment? | Ketchup | Mustard | Maple Syrup | Mayo | C",
                "In 'Frozen', what is the name of the magical snowman? | Sven | Kristoff | Olaf | Hans | C",
                "In the Jim Carrey 'Grinch', what is the name of his dog? | Rex | Max | Spot | Rover | B",
                "In 'Christmas Vacation', what does Clark plan to build with his bonus? | A Deck | A Sunroom | A Swimming Pool | A Sauna | C",
                "Complete the 'Elf' quote: 'The best way to spread Christmas cheer is...' | Buying gifts | Singing loud for all to hear | Baking cookies | Decorating trees | B",
                "Who is the villainous Mayor of Whoville in the Jim Carrey 'Grinch'? | Mayor Maywho | Mayor Grinch | Mayor Who | Mayor Lou | A",
                "What is the name of the kingdom in 'Frozen'? | Genovia | Arendelle | Florin | DunBroch | B",
                "How many 'imported Italian twinkle lights' does Clark Griswold use? | 1,000 | 10,000 | 25,000 | 50,000 | C",
                "In 'Elf', at which department store does Buddy get a job? | Macy's | Bloomingdale's | Gimbels | Saks 5th Ave | C",
                "What does the Jim Carrey Grinch eat to soothe his nerves? | Chocolate | Glass | Rocks | Garbage | B",
                "In 'Christmas Vacation', what subscription does Clark get instead of cash? | Cheese of the Month | Wine of the Month | Jelly of the Month | Beer of the Month | C",
                "In 'Frozen', how many brothers does Prince Hans have? | 6 | 9 | 12 | 15 | C",
                "Which legendary comedian plays Papa Elf in 'Elf'? | Bill Murray | Bob Newhart | Steve Martin | Chevy Chase | B",
                "What is the name of the mountain where the Grinch lives? | Mt. Crumpit | Mt. Whoville | Mt. Snowy | Mt. Doom | A",
                "In 'Christmas Vacation', what does Aunt Bethany recite instead of grace? | The National Anthem | The Pledge of Allegiance | The Lord's Prayer | The Gettysburg Address | B"
            ],
            "Christmas Music": [
                "Complete the lyric: 'Deck the halls with boughs of...' | Pine | Holly | Spruce | Mistletoe | B",
                "Which pop diva released the hit 'All I Want for Christmas Is You'? | Whitney Houston | Madonna | Mariah Carey | Ariana Grande | C",
                "In 'Frosty the Snowman', what item makes him come to life? | A Magic Wand | An Old Silk Hat | A Corncob Pipe | A Carrot Nose | B",
                "Which artist had a famous hit with 'Blue Christmas' in 1957? | Frank Sinatra | Dean Martin | Elvis Presley | Bing Crosby | C",
                "The song 'Feliz Navidad' features lyrics in English and which other language? | French | Italian | Portuguese | Spanish | D",
                "Which duo released the classic 80s hit 'Last Christmas'? | Duran Duran | Wham! | Pet Shop Boys | Tears for Fears | B",
                "In the song 'Winter Wonderland', who do they pretend the snowman is? | Santa Claus | Jack Frost | Parson Brown | Officer Joe | C",
                "Which Bing Crosby song holds the record for the best-selling single of all time? | Silent Night | White Christmas | Silver Bells | Jingle Bells | B",
                "Who sang the original 1958 version of 'Rockin' Around the Christmas Tree'? | Brenda Lee | Etta James | Peggy Lee | Patsy Cline | A",
                "Which famous Christmas song was originally written for Thanksgiving? | Joy to the World | Jingle Bells | Deck the Halls | Sleigh Ride | B",
                "Who wrote and performed the song 'Wonderful Christmastime'? | John Lennon | Elton John | George Harrison | Paul McCartney | D",
                "What is the alternate title of 'The Christmas Song'? | Chestnuts Roasting on an Open Fire | Merry Christmas to You | Yuletide Carols | Jack Frost Nipping | A",
                "In which country did the carol 'Silent Night' (Stille Nacht) originate? | Germany | Austria | Switzerland | France | B",
                "Which classical composer wrote the melody for 'Hark! The Herald Angels Sing'? | Bach | Beethoven | Mozart | Mendelssohn | D",
                "Which song was the first piece of music ever broadcast from space (Gemini 6, 1965)? | Fly Me to the Moon | Jingle Bells | Rocket Man | Joy to the World | B"
            ],
            "Holiday Traditions": [
                "What 'spy' hides on shelves to watch children for Santa? | The Grinch | Elf on the Shelf | Frosty | Jack Skellington | B",
                "Which fast-food chain is the traditional Christmas dinner in Japan? | McDonald's | Burger King | KFC | Pizza Hut | C",
                "What do naughty children traditionally receive in their stockings? | Rocks | Wood | Coal | Onions | C",
                "Which horned figure punishes naughty children in Alpine folklore? | The Grinch | Krampus | Hades | Gollum | B",
                "The Jewish festival 'Hanukkah' is also known as the Festival of what? | Lights | Oil | Bread | Weeks | A",
                "Which plant with red leaves is known as the 'Christmas Flower' in Mexico? | Holly | Mistletoe | Rose | Poinsettia | D",
                "In Ukraine, ornaments in the shape of what animal are considered good luck? | Cat | Spider | Dove | Bear | B",
                "Which organization has tracked Santa's flight path since 1955? | NASA | CIA | NORAD | FBI | C",
                "In Italian folklore, who is the witch that delivers gifts on Epiphany eve? | La Befana | Baba Yaga | Maleficent | Circe | A",
                "Which country sends a giant Christmas tree to London's Trafalgar Square every year? | Sweden | Norway | Canada | Germany | B",
                "In Iceland, how many 'Yule Lads' (mischievous trolls) visit children? | 3 | 7 | 12 | 13 | D",
                "Which ancient Roman festival is often cited as a precursor to Christmas traditions? | Lupercalia | Ides of March | Saturnalia | Bacchanalia | C",
                "St. Lucia's Day, featuring girls wearing wreaths of candles, is celebrated where? | Spain | Sweden | Ireland | Poland | B",
                "Kwanzaa was created in 1966 to celebrate which heritage? | African American | Native American | Hispanic | Caribbean | A",
                "Traditionally, what item is hidden inside a British Christmas Pudding for wealth? | A Bean | A Ring | A Silver Coin | A Thimble | C"
            ]
        };

        let questions = [];
        let prizeLadder = []; 
        let currentQuestionIndex = 0;
        let isLocked = false; 
        let pendingLetter = null;

        const setupPanel = document.getElementById('setup-panel');
        const preloadedModal = document.getElementById('preloaded-modal');
        const gameArea = document.getElementById('game-area');
        const ladderContainer = document.getElementById('money-ladder-container');
        const questionText = document.getElementById('question-text');
        const currentMoneyDisplay = document.getElementById('current-money-display');
        const nextBtn = document.getElementById('next-btn');
        const nextBtnContainer = document.getElementById('next-btn-container');
        const confirmBox = document.getElementById('confirmation-box');

        function showPreloadedMenu() {
            const list = document.getElementById('preloaded-list');
            list.innerHTML = '';
            
            Object.keys(PRELOADED_GAMES).forEach(key => {
                const btn = document.createElement('button');
                btn.className = 'game-select-btn';
                btn.innerText = key + ` (${PRELOADED_GAMES[key].length} Qs)`;
                btn.onclick = () => loadPreloadedGame(key);
                list.appendChild(btn);
            });

            preloadedModal.style.display = 'flex';
        }

        function closePreloadedMenu() {
            preloadedModal.style.display = 'none';
        }

        function loadPreloadedGame(gameName) {
            const gameData = PRELOADED_GAMES[gameName];
            parseQuestions(gameData.join('\n'));
            closePreloadedMenu();
        }

        function updateFileName() {
            const input = document.getElementById('fileInput');
            const label = document.getElementById('fileLabel');
            if (input.files && input.files.length > 0) {
                label.innerText = "ðŸ“„ " + input.files[0].name;
                label.style.borderColor = "var(--accent-warm)";
                label.style.color = "var(--text-warm)";
            }
        }

        function processFile() {
            const file = document.getElementById('fileInput').files[0];
            if (!file) { alert("Please select a file."); return; }
            const reader = new FileReader();
            reader.onload = (e) => parseQuestions(e.target.result);
            reader.readAsText(file);
        }

        function parseQuestions(text) {
            questions = [];
            const lines = text.split('\n');
            for (let line of lines) {
                if (line.trim() === "") continue;
                const parts = line.split('|').map(item => item.trim());
                if (parts.length >= 6) {
                    questions.push({
                        q: parts[0],
                        options: { A: parts[1], B: parts[2], C: parts[3], D: parts[4] },
                        correct: parts[5].toUpperCase()
                    });
                }
            }

            if (questions.length > 0) {
                generateDoublingLadder(questions.length);
                startGame();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        function generateDoublingLadder(count) {
            prizeLadder = [];
            const MAX_PRIZE = 1000000;
            for (let i = 0; i < count; i++) {
                const distance = (count - 1) - i;
                let value = MAX_PRIZE / Math.pow(2, distance);
                
                if (value >= 1000) {
                    value = Math.round(value / 500) * 500;
                } else {
                    value = Math.round(value / 50) * 50;
                }
                if (value === 0) value = 50;
                prizeLadder.push(value);
            }
        }

        function renderLadder() {
            ladderContainer.innerHTML = '';
            ladderContainer.style.display = 'flex';
            
            // Loop from 0 to Length.
            // On Desktop (Column-Reverse): 0 is Bottom, Length is Top.
            // On Mobile (Row): 0 is Left, Length is Right.
            for (let i = 0; i < prizeLadder.length; i++) {
                const step = document.createElement('div');
                step.className = 'ladder-step';
                if (prizeLadder[i] === 1000000) step.classList.add('milestone');
                step.id = `ladder-${i}`;
                
                const numSpan = document.createElement('span');
                numSpan.innerText = i + 1;
                const valSpan = document.createElement('span');
                valSpan.innerText = "$" + prizeLadder[i].toLocaleString();
                
                step.appendChild(numSpan);
                step.appendChild(valSpan);
                ladderContainer.appendChild(step);
            }
            updateLadderVisuals();
            
            // On mobile, reset scroll to left (start)
            if (window.innerWidth <= 900) {
                 ladderContainer.scrollLeft = 0;
            }
        }

        function updateLadderVisuals() {
            for (let i = 0; i < prizeLadder.length; i++) {
                const el = document.getElementById(`ladder-${i}`);
                el.classList.remove('active', 'passed', 'future');

                if (i === currentQuestionIndex) {
                    el.classList.add('active');
                    if (window.innerWidth <= 900) {
                        el.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                    }
                } else if (i < currentQuestionIndex) {
                    el.classList.add('passed'); 
                } else {
                    el.classList.add('future');
                }
            }
        }

        function startGame() {
            setupPanel.style.opacity = '0';
            setTimeout(() => {
                setupPanel.style.display = 'none';
                gameArea.style.display = 'flex';
                gameArea.style.opacity = '1';
                renderLadder();
                currentQuestionIndex = 0;
                loadQuestion();
            }, 300);
        }

        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                endGame(true);
                return;
            }

            isLocked = false;
            pendingLetter = null;
            nextBtnContainer.classList.remove('visible');
            confirmBox.style.display = 'none';

            const data = questions[currentQuestionIndex];
            const currentPrize = prizeLadder[currentQuestionIndex];

            updateLadderVisuals();
            document.getElementById('score-display').innerText = `Q: ${currentQuestionIndex + 1} / ${questions.length}`;
            currentMoneyDisplay.innerHTML = `<span style="color:var(--text-warm)">$${currentPrize.toLocaleString()}</span>`;
            
            questionText.style.opacity = 0;
            setTimeout(() => {
                 questionText.innerText = data.q;
                 questionText.style.opacity = 1;
            }, 200);
           
            document.getElementById('text-A').innerText = data.options.A;
            document.getElementById('text-B').innerText = data.options.B;
            document.getElementById('text-C').innerText = data.options.C;
            document.getElementById('text-D').innerText = data.options.D;

            ['A', 'B', 'C', 'D'].forEach(letter => {
                const btn = document.getElementById(`btn-${letter}`);
                btn.className = 'answer-btn';
                btn.disabled = false;
                btn.classList.remove('selected', 'correct', 'wrong');
            });
        }

        function selectAnswer(selectedLetter) {
            if (isLocked) return;
            isLocked = true; 
            pendingLetter = selectedLetter;
            ['A','B','C','D'].forEach(l => document.getElementById(`btn-${l}`).classList.remove('selected'));
            document.getElementById(`btn-${selectedLetter}`).classList.add('selected');
            confirmBox.style.display = 'flex';
        }

        function handleConfirmation(confirmed) {
            confirmBox.style.display = 'none';

            if (!confirmed) {
                isLocked = false;
                document.getElementById(`btn-${pendingLetter}`).classList.remove('selected');
                pendingLetter = null;
            } else {
                revealResult();
            }
        }

        function revealResult() {
            const selectedBtn = document.getElementById(`btn-${pendingLetter}`);
            const currentQ = questions[currentQuestionIndex];
            
            setTimeout(() => {
                selectedBtn.classList.remove('selected');

                if (pendingLetter === currentQ.correct) {
                    selectedBtn.classList.add('correct');
                    nextBtnContainer.classList.add('visible');
                } else {
                    selectedBtn.classList.add('wrong');
                    document.getElementById(`btn-${currentQ.correct}`).classList.add('correct');
                    endGame(false);
                }
            }, 750);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function endGame(won) {
            nextBtnContainer.classList.add('visible');
            nextBtn.innerText = "Back to Menu";
            nextBtn.onclick = () => location.reload();

            if (won) {
                questionText.innerHTML = `<span style='color:var(--text-warm); font-size: 1.5rem;'>CONGRATULATIONS! You are a Millionaire!</span>`;
            } else {
                questionText.innerHTML = "<span style='color:var(--accent-wrong); font-size: 1.5rem;'>GAME OVER. Better luck next time.</span>";
            }
            document.querySelector('.answers-grid').style.opacity = '0.5';
            document.querySelector('.answers-grid').style.pointerEvents = 'none';
        }
    </script>
</body>
</html>
